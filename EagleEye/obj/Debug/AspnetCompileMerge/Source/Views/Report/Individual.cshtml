@model EagleEye.DAL.Partial.Report_P
@using EagleEye.Common
@using Common
@using EagleEye.DAL.Partial
@{
    ViewBag.Title = "Individual";
    Communication_P com = @SessionHandling.Communication;
}

<!-- [ content ] Start -->
<div class="container-fluid flex-grow-1 container-p-y">
    <div class="card">
        <div class="col text-center">
            <hr />
            <div class="text-center" style="font-weight:500;font-size:x-large;">ID# <span class="text" id="txtID">@Model.Employee_ID</span></div>
            <hr />
            @if (Model.Employee_Photo != "")
            {
                <img src="@Model.Employee_Photo" id="imgEmp" style="width:100px;height:100px;" />
            }
            else
            {
                <img src="~/assets/img/avatars/no-image.jpg" id="imgEmp" style="width:100px;height:100px;" />
            }
            <hr />
            <div class="text-center" style="font-weight:500;font-size:x-large;" id="txtName">@Model.Employee_Name</div>
            <div class="text-center">All Transactions: <span id="txtTransaction" style="font-weight:500;font-size:large;">@Model.att_count</span></div>
            <hr />
        </div>
    </div>
    <div class="card">
        <div class="text-center">
            <label class="text" style="font-weight:500;font-size:large;" id="dtDate">@Model.curr_datetime</label>
        </div>
        <!-- / Controls -->
        <div class="card">
            <table class="table">
                <thead style="color:white;background-color:dimgray;text-align:center;">
                    <tr>
                        @foreach (Att_Status_P item in Model.Att_Status_List)
                        {
                            if (item.Name != "")
                            {
                                <th value="@item.Code">@item.Name</th>
                            }
                            else
                            {
                                <th value="@item.Code">Status_@item.Code</th>
                            }
                        }
                        </tr>
                </thead>
                <tbody id="tblAttLog" style="text-align:center;"></tbody>
            </table>
        </div>
    </div>
</div>

@section scripts{


    @*Startup*@
    <script type="text/javascript">

        $(document).ready(function () {
            var emp = "@Model.Employee_ID";
             var dt = "@Model.curr_datetime";

            GetTableData(emp,dt);
        });

    </script>

    @*Events*@
    <script type="text/javascript">

    </script>


    @*Function*@
    <script type="text/javascript">

        function GetTableData(emp,dt) {

            $.ajax({
                url: '@Url.Action("GetReport", "Report")',
                type: "POST",
                data: { emp: emp, dt: dt },
                dataType: "json",
                cache: false,
                success: function (data) {
                    if (data.result) {
                        $("#tblAttLog").html(data.result);
                    }
                    },
                    failure: function (response) {
                    },
                    error: function (err, status) {
                    },
                    complete: function (data) {
                }
            });
        }
    </script>

}